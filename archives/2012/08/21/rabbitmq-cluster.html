
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>rabbitmq集群-1 介绍</title>
	<meta property='og:locale' content='zh_CN'/>
	<meta property='og:title' content='rabbitmq集群-1 介绍'/>
	<meta property='og:url' content='http://www.yif1.com'/>
	<meta property='og:site_name' content='程序员 - 博客 - HuangDing'/>
	<meta property='og:type' content='article'/>
	<link href='/assets/themes/the-program/css/style.css' rel="stylesheet" media="all" />
	<link href="/assets/highlight/google-code-prettify/prettify.css" rel="stylesheet" type="text/css" media="all">
</head>
<body>

<div id="page" class="hentry">
	<header class="the-header">
		<div class="unit-head">
			<div class="unit-inner unit-head-inner">
				<nav class="nav-global">
					<ul>
						<li class="logo"><a href="/">HuangDing</a></li>
						<li class="code"><a href="/code.html">code</a></li>
						<li class="archive"><a href="/archive.html">archive</a></li>
						<li class="category"><a href="/category.html">category</a></li>
						<li class="about"><a href="/info.html">about</a></li>
					</ul>
				</nav>
			</div><!-- unit-inner -->
		</div><!-- unit-head -->
	</header>
	<div class="body" role="main">
		<div class="unit-body">
			<div class="unit-inner unit-body-inner">
				<div class="entry-content">
					
<article class="unit-article layout-post">
	<div class="unit-inner unit-article-inner">
		<div class="content">
			<header>
				<div class="unit-head">
					<div class="unit-inner unit-head-inner">
						<h1 class="h2 entry-title">rabbitmq集群-1 介绍</h1>
					</div><!-- unit-inner -->
				</div><!-- unit-head -->
			</header>

			<div class="bd">
				<div class="entry-content">
					<p><a href="http://www.rabbitmq.com/clustering.html#auto-config">http://www.rabbitmq.com/clustering.html#auto-config</a></p>

<h3>Clustering overview</h3>

<ul>
<li><p>A RabbitMQ broker is a logical grouping of one or several Erlang nodes, each running the RabbitMQ application and sharing users, virtual hosts, queues, exchanges, etc. Sometimes we refer to the collection of nodes as a cluster.</p>

<p><strong>一个rabbitmq集群中可以共享 user，vhost，queue，exchange等</strong></p></li>
<li><p>All data/state required for the operation of a RabbitMQ broker is replicated across all nodes, for reliability and scaling, with full ACID properties. An exception to this are message queues, which currently only reside on the node that created them, though they are visible and reachable from all nodes. Future releases of RabbitMQ will introduce migration and replication of message queues.</p>

<p><strong>所有的数据和状态都是必须在所有节点上复制的，一个例外是，那些当前只属于创建它的节点的消息队列，尽管它们可见且可被所有节点读取</strong></p></li>
<li><p>The easiest way to set up a cluster is by auto configuration using a default cluster config file. See the clustering transcripts for an example.
The composition of a cluster can be altered dynamically. All RabbitMQ brokers start out as running on a single node. These nodes can be joined into clusters, and subsequently turned back into individual brokers again.</p>

<p><strong>rabbitmq节点可以动态的加入到集群中，一个节点它可以加入到集群中，也可以从集群环境退出</strong></p></li>
<li><p>RabbitMQ brokers tolerate the failure of individual nodes. Nodes can be started and stopped at will.</p>

<p><strong>允许个别的节点失败</strong></p></li>
<li><p>The list of currently active cluster connection points is returned in the known_hosts field of AMQP's connection.open_ok method, as a comma-separated list of addresses where each address is an IP address or a DNS name, optionally followed by a colon and a port number.</p>

<p>Nodes in a cluster perform some basic load balancing by responding to client connection attempts with AMQP's connection.redirectinsist flag in the connection.open method. method as appropriate, unless the client suppressed redirects by setting the insist flag in the connection.open method.</p>

<p><strong>集群会进行一个基本的负载均衡</strong></p></li>
<li><p>A node can be a RAM node or a disk node. RAM nodes keep their state only in memory (with the exception of the persistent contents of durable queues which are still stored safely on disc). Disk nodes keep state in memory and on disk. As RAM nodes don't have to write to disk as much as disk nodes, they can perform better. Because state is replicated across all nodes in the cluster, it is sufficient to have just one disk node within a cluster, to store the state of the cluster safely. Beware, however, that RabbitMQ will not stop you from creating a cluster with only RAM nodes. Should you do this, and suffer a power failure to the entire cluster, the entire state of the cluster, including all messages, will be lost.<br/>
<strong>集群中有两种节点：<br/>
内存节点：只保存状态到内存（一个例外的情况是：持久的queue的持久内容将被保存到disk）<br/>
磁盘节点：保存状态到内存和磁盘<br/>
内存节点虽然不写入磁盘，但是它执行比磁盘节点要好<br/>
集群中，只需要一个磁盘节点来保存状态就足够了<br/>
如果集群中只有内存节点，那么不能停止它们，否则所有的状态，消息等都会丢失</strong></p></li>
</ul>


					<div class="meta asset-footer">
						<ul class="date-publish list-linear">
							<li>Published: </li>
							<li><date class="date-pub" title="2012-08-21" datetime="2012-08-21" pubdate>
							<span class="year">2012-08-21</span>
							</date></li>
						</ul>
						<ul class="list-category list-linear">
							<li class="list-head">category: </li>
							
							


  
     
    	<li style="list-style:none;"><a href="/category.html#软件架构-ref">
    		软件架构 <span>10</span>
    	</a></li>
     
    	<li style="list-style:none;"><a href="/category.html#高性能web-ref">
    		高性能web <span>14</span>
    	</a></li>
    
  


						</ul>
						<ul class="list-tag list-linear">
							<li class="list-head">tags: </li>
							
							


  
     
    	<li><a href="/tags.html#rabbitmq-ref">rabbitmq <span>1</span></a></li>
    
  



						</ul>
						<ul class="list-tag list-linear">
							<li class="list-head">版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">Creative Commons BY-NC-ND 3.0</a></li>

						</ul>
					</div><!-- meta -->
				</div><!-- entry-content -->
				<div class="misc-content">
					<div class="unit-foot">
						<div class="unit-inner unit-foot-inner">
							<nav class="pagination">
								<ul style="text-align:center;padding-top:5px;">
									
									<li class="prev" style="float:left;margin-left:0;"><a class="internal" rel="prev"  href="/archives/2012/08/12/why-recommend-nodejs.html" title="View 我为什么向后端工程师推荐Node.js">&laquo; 我为什么向后端工程师推荐Node.js</a></li>
									

									
									<li class="next" style="float:right;"><a class="internal" rel="next"  href="/archives/2012/09/10/centos-php-nginx-mysql.html" title="View Centos搭建PHP5.3.8+Nginx1.0.9+Mysql5.5.17">Centos搭建PHP5.3.8+Nginx1.0.9+Mysql5.5.17 &raquo;</a></li>
									
								</ul>
							</nav>
						</div>
					</div>
					<div class="comment">
					


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'beango'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




					</div>
				</div><!-- misc-content -->
			</div><!-- bd -->

		</div><!-- content -->
	</div><!-- unit-inner -->
</article>

				</div>
			</div><!-- unit-inner -->
		</div><!-- unit-body -->
		<p class="licence">
			Theme: <a href="http://themes.jekyllbootstrap.com/">the_program</a> based on <a href="http://jekyllbootstrap.com/">Jekyll-bootstrap</a>.<br>
			Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a>.<script src="http://s21.cnzz.com/stat.php?id=4827427&web_id=4827427&show=pic" language="JavaScript"></script>
		</p>
	</div><!-- body -->
</div><!-- page -->

<script>
/*! A fix for the iOS orientationchange zoom bug.Script by @scottjehl, rebound by @wilto. MIT License.*/
(function(j){var i=j.document;if(!i.querySelectorAll){return}var l=i.querySelectorAll("meta[name=viewport]")[0],a=l&&l.getAttribute("content"),h=a+", maximum-scale=1.0",d=a+", maximum-scale=10.0",g=true,c=j.orientation,k=0;if(!l){return}function f(){l.setAttribute("content",d);g=true}function b(){l.setAttribute("content",h);g=false}function e(m){c=Math.abs(j.orientation);k=Math.abs(m.gamma);if(k>8&&c===0){if(g){b()}}else{if(!g){f()}}}j.addEventListener("orientationchange",f,false);j.addEventListener("deviceorientation",e,false)})(this);
</script>
  

<a class='top-link' id="top-link" style="cursor:pointer;"><img src="/assets/images/back-top.png" width="20" border=0 alt="返回顶部" title="返回顶部"></a>
<a class='btm-link' id="btm-link" style="cursor:pointer;"><img src="/assets/images/back-btm.png" width="20" border=0 alt="跳到底部" title="跳到底部"></a>

<script src="http://libs.baidu.com/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">
<!--
!window.jQuery && document.write('<script src=/assets/jquery-1.7.1.min.js><\/script>');//
 //-->
</script>
<script type="text/javascript" src="/assets/jquery.scrollTo-1.4.2.js"></script>
<script src='/assets/default.js'></script>
<script type="text/javascript" src="/assets/highlight/google-code-prettify/prettify.js"></script>
<script src="/assets/modernizr.min.js"></script>
</body>
</html>

