
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>基于.NET的大型Web站点StackOverflow架构分析</title>
	<meta name="author" content="Huang Ding">
	<link href='/assets/themes/the-program/css/style.css' rel="stylesheet" media="all" />
	<link href="/assets/highlight/google-code-prettify/prettify.css" rel="stylesheet" type="text/css" media="all">
</head>
<body>

<div id="page" class="hentry">
	<header class="the-header">
		<div class="unit-head">
			<div class="unit-inner unit-head-inner">
				<nav class="nav-global">
					<ul>
						<li class="logo"><a href="/">Huang Ding</a></li>
						<li class="code"><a href="/code.html">code</a></li>
						<li class="archive"><a href="/archive.html">archive</a></li>
						<li class="category"><a href="/category.html">category</a></li>
						<li class="about"><a href="/info.html">about</a></li>
						<li class="tag"><a href="/tags.html">tags</a></li>
						<li class="wiki"><a href="/wiki/">wiki</a></li>
						<li class="blog"><a href="#">blog</a></li>
					</ul>
				</nav>
			</div><!-- unit-inner -->
		</div><!-- unit-head -->
	</header>
	<div class="body" role="main">
		<div class="unit-body">
			<div class="unit-inner unit-body-inner">
				<div class="entry-content">
					
<article class="unit-article layout-post">
	<div class="unit-inner unit-article-inner">
		<div class="content">
			<header>
				<div class="unit-head">
					<div class="unit-inner unit-head-inner">
						<h1 class="h2 entry-title">基于.NET的大型Web站点StackOverflow架构分析</h1>
					</div><!-- unit-inner -->
				</div><!-- unit-head -->
			</header>

			<div class="bd">
				<div class="entry-content">
					<p>原文链接：<a href="http://highscalability.com/blog/2011/3/3/stack-overflow-architecture-update-now-at-95-million-page-vi.html">Stack Overflow Architecture Update - Now At 95 Million Page
Views A
Month</a></p>

<p>编译/博客园</p>

<p>Stack
Overflow网址：<a href="http://stackoverflow.com/">http://stackoverflow.com/</a></p>

<p><strong>当前访问量：</strong>每月9500PV（每天300多万PV）</p>

<p><strong>当前Alexa排名：</strong>149</p>

<p><strong>所用.NET技术：</strong>C#、Visual Studio 2010 Team Suite、ASP.NET 4、ASP.NET
MVC 3、Razor、LINQ to SQL+raw SQL</p>

<p><strong>下面是英文原文：</strong></p>

<p>A lot has happened since my first article on the <a href="http://highscalability.com/blog/2009/8/5/stack-overflow-architecture.html">Stack Overflow
Architecture</a>(2009-8-5).
Contrary to the theme of that last article, which lavished attention on
Stack Overflow's dedication to a scale-up strategy, Stack Overflow has
both grown up and out in the last few years.</p>

<p>自从2009年8月发布了第一篇关于“Stack Overflow 架构”方面的文章，Stack
Overflow已经发生了很大的变化。那篇文章更多关注的是Stack
Overflow如何解决网站的扩展性(scale-up)问题，而经过几年的发展，Stack
Overflow已经长大成人，成长为了大型网站。</p>

<p>Stack Overflow has grown up by more then doubling in size to over 16
million users and multiplying its number of page views nearly 6 times to
95 million page views a month.  </p>

<p>现在与2009年相比，Stack
Overflow每月独立访问用户翻了一倍，超过1600万；每月PV翻了近6倍，达到9500万。</p>

<p>Stack Overflow has grown out by expanding into the <a href="http://stackexchange.com/">Stack Exchange
Network</a>, which includes Stack Overflow,
Server Fault, and Super User for a grand total of 43 different sites.
That's a lot of fruitful multiplying going on.</p>

<p>Stack Overflow新增了很多站点，比如Server Fault, Super
User等，共有43个不同站点组成了Stack Exchange
Network，可谓硕果累累，迅猛增长。</p>

<p>What hasn't changed is Stack Overflow's openness about what they are
doing. And that's what prompted this update. A recent series of posts
talks a lot about how they've been handling their growth: <a href="http://blog.serverfault.com/post/stack-exchanges-architecture-in-bullet-points/">Stack
Exchange’s Architecture in Bullet
Points</a>, <a href="http://blog.serverfault.com/post/1432571770/">Stack
Overflow’s New York Data
Center</a>, <a href="http://blog.serverfault.com/post/1097492931/">Designing For
Scalability of Management and Fault
Tolerance</a>, <a href="http://blog.stackoverflow.com/2011/01/stack-overflow-search-now-81-less-crappy/">Stack
Overflow Search — Now 81%
Less</a>, <a href="http://blog.stackoverflow.com/2010/01/stack-overflow-network-configuration/">Stack
Overflow Network
Configuration</a>, <a href="http://meta.stackoverflow.com/questions/69164/does-stackoverflow-use-caching-and-if-so-how">Does
StackOverflow use caching and if so,
how?</a>, <a href="http://meta.stackoverflow.com/questions/10369/which-tools-and-technologies-build-the-stack-exchange-network">Which
tools and technologies build the Stack Exchange
Network?</a>.</p>

<p>Stack
Overflow的变化翻天覆地，而不变的是他们开放的心态，所以才有了这篇架构分享的文章。最近，他们写了一系列文章分享他们如何应对这样的快速增长。</p>

<p>Some of the more obvious differences across time are:<br/>
穿越时空，我们来看看有哪些明显的变化？</p>

<ul>
<li><strong>Just More</strong>. More users, more page views, more datacenters, more
sites, more developers, more operating systems, more databases, more
machines. Just a lot <a href="http://blog.stackoverflow.com/2011/01/state-of-the-stack-2010-a-message-from-your-ceo/">more of
more</a>.<br/>
<strong>更多：</strong>更多的用户，更多的PV，更多的数据中心，更多的站点，更多的开发者，更多的操作系统，更多的数据库，更多的服务器...</li>
<li><strong>Linux</strong>. Stack Overflow was known for their Windows stack, now
they are using a lot more Linux machines for HAProxy,
Redis, Bacula, Nagios, logs, and routers. All support functions seem
to be handled by Linux, which has required the development of
<a href="http://blog.serverfault.com/post/1097492931/">parallel release
processes</a>. <br/>
<strong>Linux：</strong>Stack
Overflow因使用Windows系统而著称，现在他们使用越来越多的Linux服务器，比如HAProxy(负载均衡),
Redis(NoSQL数据库), Bacula(数据备份系统), Nagios(远程监控软件),
日志,
路由器都运行于Linux系统，几乎所有需要并行处理的功能都是由Linux处理(这句话的翻译可能不准确)。</li>
<li><strong>Fault Tolerance</strong>. Stack Overflow is now <a href="http://blog.stackoverflow.com/2010/01/stack-overflow-network-configuration/">being served by two
different</a>
switches on two different internet connections, they've added
redundant machines, and some functions have moved to a second
datacenter.<br/>
<strong>容错：</strong>Stack
Overflow使用了两条不同的互联网线路，增加了更多的冗余服务器，将一些网站服务运行于第二个数据中心。</li>
<li><strong>NoSQL</strong>. Redis is now used as a <a href="http://meta.stackoverflow.com/questions/69164/does-stackoverflow-use-caching-and-if-so-how">caching
layer</a>
for the entire network. There wasn't a separate caching tier before
so this a big change, as is using a NoSQL database on Linux.<br/>
<strong>NoSQL：</strong>Redis作为整个网站的缓存层。这是一个巨大的改变，以前并没有将缓存作为一个独立的层分离出来。Redis运行于Linux。</li>
</ul>


<p>Unfortunately, I couldn't find any coverage on some of the open
questions I had last time, like how they were going to deal with
multi-tenancy across so many diffrent properties, but there's still
plenty to learn from. Here's a roll up a few different sources:</p>

<p>遗憾的是，一些我关注的问题并没有从中找到答案，比如面对这么多不同的系统，如何解决多租户的问题（Multi-tenancy
是一种软件体系结构，在这种体系结构中软件运行在 software as a service
服务商的服务器上，服务于多个客户组织即
tenant）。但是，从中我们依然可以学到很多。下面是收集的一些数据列表：</p>

<h3>The Stats</h3>

<ul>
<li>95 Million Page Views a Month</li>
<li>800 HTTP requests a second</li>
<li>180 DNS requests a second</li>
<li>55 Megabits per second</li>
<li>16 Million Users  - Traffic to Stack Overflow grew 131% in 2010, to
16.6 million global monthly uniques. </li>
</ul>


<h3>Data Centers</h3>

<ul>
<li>1 Rack with Peak Internet in OR (Hosts our chat and Data Explorer)</li>
<li>2 Racks with Peer 1 in NY (Hosts the rest of the Stack Exchange
Network)</li>
</ul>


<h3>Hardware</h3>

<ul>
<li><p>10 Dell R610 IIS web servers (3 dedicated to Stack Overflow):</p>

<ul>
<li>1x Intel Xeon Processor E5640 @ 2.66 GHz Quad Core with 8
threads</li>
<li>16 GB RAM</li>
<li>Windows Server 2008 R2</li>
</ul>
</li>
<li><p>2 Dell R710 database servers:</p>

<ul>
<li>2x Intel Xeon Processor X5680 @ 3.33 GHz</li>
<li>64 GB RAM</li>
<li>8 spindles</li>
<li>SQL Server 2008 R2</li>
</ul>
</li>
<li><p>2 Dell R610 HAProxy servers:</p>

<ul>
<li>1x Intel Xeon Processor E5640 @ 2.66 GHz</li>
<li>4 GB RAM</li>
<li>Ubuntu Server</li>
</ul>
</li>
<li><p>2 Dell R610 Redis servers:</p>

<ul>
<li>2x Intel Xeon Processor E5640 @ 2.66 GHz</li>
<li>16 GB RAM</li>
<li>CentOS</li>
</ul>
</li>
<li><p>1 Dell R610 Linux backup server running Bacula:</p>

<ul>
<li>1x Intel Xeon Processor E5640 @ 2.66 GHz</li>
<li>32 GB RAM</li>
</ul>
</li>
<li><p>1 Dell R610 Linux management server for Nagios and logs:</p>

<ul>
<li>1x Intel Xeon Processor E5640 @ 2.66 GHz</li>
<li>32 GB RAM</li>
</ul>
</li>
<li><p>2 Dell R610 VMWare ESXi domain controllers:</p>

<ul>
<li>1x Intel Xeon Processor E5640 @ 2.66 GHz</li>
<li>16 GB RAM</li>
</ul>
</li>
<li><p>2 Linux routers</p></li>
<li>5 Dell Power Connect switches</li>
</ul>


<h3>Dev Tools</h3>

<ul>
<li><strong>C#</strong>: Language</li>
<li><strong>Visual Studio 2010 Team Suite</strong>: IDE</li>
<li><strong>Microsoft ASP.NET (version 4.0)</strong>: Framework</li>
<li><strong>ASP.NET MVC 3</strong>: Web Framework</li>
<li><strong>Razor</strong>: View Engine</li>
<li><strong>jQuery 1.4.2</strong>: Browser Framework:</li>
<li><strong>LINQ to SQL, some raw SQL</strong>: Data Access Layer</li>
<li><strong><a href="http://mercurial.selenic.com/">Mercurial</a> and
<a href="http://www.fogcreek.com/kiln/">Kiln</a></strong>: Source
Control（分布式版本控制系统）</li>
<li><a href="http://www.scootersoftware.com/"><strong>Beyond Compare 3</strong></a>: Compare
Tool（文件比较工具）</li>
</ul>


<h3>Software and Technologies Used</h3>

<ul>
<li>Stack Overflow uses a
<a href="http://stackoverflow.com/questions/177901/what-does-wisc-stack-mean">WISC</a>
stack via
<a href="http://blog.stackoverflow.com/2009/03/stack-overflow-and-bizspark/">BizSpark</a></li>
<li><strong>Windows Server 2008 R2 x64</strong>: Operating System</li>
<li><strong>SQL Server 2008 R2</strong> running<strong>Microsoft Windows Server 2008
Enterprise Edition x64</strong>: Database</li>
<li>Ubuntu Server</li>
<li>CentOS</li>
<li><strong>IIS 7.0</strong>: Web Server</li>
<li><a href="http://haproxy.1wt.eu/"><strong>HAProxy</strong></a>: for load
balancing（高性能的负载TCP/HTTP均衡器）</li>
<li><strong>Redis</strong>: used as the distributed caching
layer.（作为分布式缓存层的NoSQL数据库）</li>
<li><strong>CruiseControl.NET</strong>: for builds and automated
deployment（.NET平台的持续集成工具）</li>
<li><strong>Lucene.NET</strong>:  for search</li>
<li><a href="http://www.bacula.org/en/"><strong>Bacula</strong></a>: for
backups（开源的数据备份系统）</li>
<li><a href="http://www.nagios.org/"><strong>Nagios</strong></a>: (with
<a href="http://n2rrd.diglinks.com/cgi-bin/trac.fcgi">n2rrd</a> and drraw
plugins) for monitoring（监视系统运行状态和网络信息的远程监控软件）</li>
<li><strong><a href="http://www.splunk.com/">Splunk</a>:</strong> for logs（日志分析工具）</li>
<li><strong><a href="http://www.red-gate.com/products/dba/sql-monitor/">SQL
Monitor</a>:</strong> from
Red Gate - for SQL Server monitoring</li>
<li><strong>Bind</strong>: for DNS</li>
<li><strong><a href="http://www.wowwee.com/en/products/tech/telepresence/rovio/rovio">Rovio</a></strong>:  a
little robot (a real robot) allowing remote developers to visit the
office “virtually.”</li>
<li><a href="http://www.pingdom.com/"><strong>Pingdom</strong></a>:  an external monitor and
alert service.（网站监控服务及网站速度测试工具）</li>
</ul>


<h3>External Bits</h3>

<p>Code that is not included as part of the development tools:</p>

<ul>
<li><a href="http://www.google.com/recaptcha">reCAPTCHA</a>（用于验证码验证，已被Google收购）</li>
<li>DotNetOpenId（.NET 平台上的 OpenID 实现方案）</li>
<li>WMD - Now developed as open source. See <a href="https://github.com/cky/wmd">github network
graph</a> （轻量级所见即所得编辑器）</li>
<li><a href="http://code.google.com/p/google-code-prettify/">Prettify</a>（代码高亮显示）</li>
<li>Google Analytics</li>
<li>Cruise Control .NET</li>
<li>HAProxy（负载均衡）</li>
<li><a href="http://www.cacti.net/">Cacti</a>（网络流量监测图形分析工具）</li>
<li><a href="http://code.google.com/p/markdownsharp/">MarkdownSharp</a>（Markdown文本处理器的C#实现）</li>
<li><a href="http://code.google.com/p/flot/">Flot</a>（基于JQuery的纯JavaScript实现的绘图库）</li>
<li>Nginx（反向代理服务器）</li>
<li>Kiln（分布式版本控制系统）</li>
<li>CDN: none, all static content is served off the
<a href="http://sstatic.net/">sstatic.net</a>, which is a fast, cookieless
domain intended for static content delivered to the Stack Exchange
family of websites.
（没有使用CDN，用一个专门的域名sstatic.net传递所有的静态内容）</li>
</ul>


<h3>Developers and System Administrators</h3>

<ul>
<li>14 Developers</li>
<li>2 System Administrators</li>
</ul>


<h3>Content</h3>

<ul>
<li><strong>License:</strong> Creative Commons Attribution-Share Alike 2.5 Generic</li>
<li><strong>Standards:</strong> OpenSearch, Atom</li>
<li><strong>Host:</strong> PEAK Internet</li>
</ul>


<h3>More Architecture and Lessons Learned</h3>

<ul>
<li>HAProxy is used instead of Windows NLB because HAProxy is cheap,
easy, free, works great as a 512MB VM “device” on a network via
Hyper-V. It also works in front of the boxes so it’s completely
transparent to them, and easier to troubleshoot as a different
networking layer instead of being intermixed with all your windows
configuration.<br/>
用HAProxy取代了Windows
NLB，HAProxy成本更低，更易于使用，通过Hyper-V可以很好地运行于512M内存的虚拟机。它工作于服务器群的最前端，对所有的服务器都透明。相比于原来混杂在一起的Windows配置，它运行于一个独立的网络层，更易于维护与故障处理。</li>
<li>A CDN is not used because even “cheap” CDNs like Amazon one are very
expensive relative to the bandwidth they get bundled into their
existing host’s plan. The least they could pay is $1k/month based
on Amazon’s CDN rates and their bandwidth usage.<br/>
没有使用CDN，即使使用像Amazon那样与主机空间捆绑在一起的看起来“便宜”的CDN，实际的费用也是很高的，至少需要1000美元/月。</li>
<li>Backup is to disk for fast retrieval and to tape for historical
archiving.<br/>
备份方案有两种，一种用于快速恢复的磁盘备份，一种用于历史数据存档的磁带备份。</li>
<li>Full Text Search in SQL Server is very badly integrated, buggy,
deeply incompetent, so they went to Lucene.<br/>
SQL Server的全文索引是非常差劲的，所以他们用Lucene.NET。</li>
<li>Mostly interested in peak HTTP request figures as this is what they
need to make sure they can handle.<br/>
让人很感兴趣的是他们如何处理访问高峰时的HTTP请求。</li>
<li>All properties now run on the same Stack Exchange platform. That
means Stack Overflow, Super User, Server Fault, Meta, WebApps, and
Meta Web Apps are all running on the same software.<br/>
所有这些都运行于Stack Exchange平台，那意味着Stack Overflow, Super
User, Server Fault, Meta, WebApps, 和Meta Web
Apps都运行于同一个软件。</li>
<li>There are separate StackExchange sites because people have different
sets of expertise that shouldn't cross over to different topic
sites. <a href="http://meta.stackoverflow.com/questions/69422/why-separate-stack-exchange-accounts">You can be the greatest chef in the world, but that doesn't
qualify you for fixing a
server.</a><br/>
也有一些独立运行的StackExchange站点，服务于那些具有多个专业技能，又不想为了不同的话题在多个站点之间奔波的人。如果你能成为最伟大的主厨，不能因为给你安排了服务员的工作，你就安于现状。</li>
<li>They aggressively cache everything.<br/>
他们疯狂地使用缓存。</li>
<li>All pages accessed by (and subsequently served to) annonymous users
are cached via <a href="http://learn.iis.net/page.aspx/154/walkthrough-iis-70-output-caching/">Output
Caching</a>.<br/>
未登录用户访问的所有页面都通过Output Caching进行缓存。</li>
<li>Each site has 3 distinct caches: local, site, global. <br/>
每个站点使用三种类型的缓存：本地、站点、全局。</li>
<li><p><strong>local cache</strong>: can only be accessed from 1 server/site pair   
本地缓存：只能被当前站点的当前服务器访问。</p>

<ul>
<li>To limit network latency they use a local "L1" cache, basically
HttpRuntime.Cache, of recently set/read values on a server. This
would reduce the cache lookup overhead to 0 bytes on the
network.<br/>
为了减少网络延时，通常使用HttpRuntime.Cache作为一级缓存，这样可以避免通过网络在缓存服务器上查找的开销。</li>
<li>Contains things like user sessions, and pending view count
updates.<br/>
缓存内容包含用户会话，视图数的更新。</li>
<li>This resides purely in memory, no network or DB access.<br/>
直接缓存在内存中。</li>
</ul>
</li>
<li><p><strong>site cache</strong>:  can be accessed by any instance (on any server) of
a single site<br/>
<strong>站点级缓存：</strong>能被同一个站点的所有服务器访问。</p>

<ul>
<li>Most cached values go here, things like hot question id lists
and user acceptance rates are good examples<br/>
大部分的缓存都在这一级，比如热点问题ID列表，用户支持率。</li>
<li>This resides in Redis (in a distinct DB, purely for easier
debugging)<br/>
缓存数据存储在Redis数据库中。</li>
<li>Redis is so fast that the slowest part of a cache lookup is the
time spent reading and writing bytes to the network.<br/>
Redis速度很快，缓存查找的开销主要在网络传输上。</li>
<li>Values are compressed before sending them to Redis. They have
plenty of CPU and most of their data are strings so they get a
great compression ratio.<br/>
缓存数据发送至Redis之前会被压缩。为什么要压缩呢？因为CPU资源绰绰有余，而且大部分缓存数据是字符串，压缩率会很高，何乐而不为呢。</li>
<li>The CPU usage on their Redis machines is 0%.<br/>
Redis服务器上的CPU使用率是0%。</li>
</ul>
</li>
<li><p><strong>global cache</strong>: which is shared amongst all sites and servers
<strong>全局缓存：</strong>被所有站点和服务器共享。</p>

<ul>
<li>Inboxes, API usage quotas, and a few other truly global things
live here<br/>
缓存内容包含收件箱，API使用限额，一些全局设置等。</li>
<li>This resides in Redis (in DB 0, likewise for easier debugging)<br/>
缓存于Redis数据库中。</li>
</ul>
</li>
<li><p>Most items in the cache expire after a timeout period (a few minutes
usually) and are never explicitly removed. When a specific cache
invalidation is required they use <a href="http://code.google.com/p/redis/wiki/PublishSubscribe">Redis
messaging</a> to
publish removal notices to the "L1" caches.<br/>
大部分缓存项目在超过缓存时间之后会自动过期（通常几分钟），不需要进行删除操作。当需要让一个特定的缓存失效，会通过Redis消息系统给一级缓存发送删除通知。</p></li>
<li>Joel Spolsky is not a Microsoft Loyalist, he doesn't make the
technical decisions for Stack Overflow, and considers Microsoft
licensing a rounding error. Consider yourself corrected <a href="http://news.ycombinator.com/item?id=2284900">Hacker News
commentor</a>.<br/>
Joel Spolsky（Stack
Overflow的创始人）并不是微软的忠诚分子，他不负责技术决策，使用微软软件考虑的也只是性价比。Hacker
News上一些评论者的说法需要纠正。</li>
<li>For their IO system <a href="http://blog.serverfault.com/post/our-storage-decision/">they
selected</a> a
RAID 10 array of <a href="http://www.intel.com/design/flash/nand/extreme/index.htm">Intel X25 solid state
drives</a> .
The RAID array eased any concerns about reliability and the SSD
drives performed really well in comparision to FusionIO at a much
cheaper price.<br/>
对于IO系统，他们选择的是Intel X25 solid state drives(SSD硬盘)的RAID
10磁盘阵列，这样的磁盘阵列，保证了可靠性。这个SSD硬盘用起来感觉不错，而且价格比FusionIO的便宜。</li>
<li>The <a href="http://news.ycombinator.com/item?id=2285931">full boat cost</a>
for their Microsoft licenses would be approximately $242K. Since
Stack Overflow is using Bizspark they are not paying near the full
sticker price, but that's the max they could pay.<br/>
使用的这些微软软件，如果全部购买的话，总费用大概在24.2万美元。由于Stack
Overflow参加了微软的Bizspark计划，所以不需要付这么多钱，但是要付的话，最多也就是这么多。</li>
</ul>


<h2>Related Articles</h2>

<ul>
<li><a href="http://blog.serverfault.com/post/stack-exchanges-architecture-in-bullet-points/">Stack Exchange’s Architecture in Bullet
Points</a></li>
<li><a href="http://blog.serverfault.com/post/1432571770/">Stack Overflow’s New York Data
Center</a> - hardware of
the various machines?</li>
<li><a href="http://blog.serverfault.com/post/1097492931/">Designing For Scalability of Management and Fault
Tolerance</a></li>
<li><a href="http://news.ycombinator.com/item?id=2207789">HackerNews Thread</a></li>
<li><a href="http://blog.stackoverflow.com/">Stack Overflow Blog</a></li>
<li><a href="http://blog.stackoverflow.com/2011/01/stack-overflow-search-now-81-less-crappy/">Stack Overflow Search — Now 81% Less
Crappy</a> -
Lucene is now running on an underused cluster.</li>
<li><a href="http://blog.stackoverflow.com/2011/01/state-of-the-stack-2010-a-message-from-your-ceo/">State of the Stack 2010 (a message from your
CEO)</a></li>
<li><a href="http://blog.stackoverflow.com/2010/01/stack-overflow-network-configuration/">Stack Overflow Network
Configuration</a></li>
<li><a href="http://meta.stackoverflow.com/questions/69164/does-stackoverflow-use-caching-and-if-so-how">Does StackOverflow use caching and if so,
how?</a></li>
<li><a href="http://meta.stackoverflow.com/">Meta StackOverflow</a></li>
<li><a href="http://meta.stackoverflow.com/questions/6435/how-does-stackoverflow-handle-cache-invalidation">How does StackOverflow handle cache
invalidation?</a></li>
<li><a href="http://meta.stackoverflow.com/questions/10369/which-tools-and-technologies-build-the-stack-exchange-network">Which tools and technologies build the Stack Exchange
Network?</a></li>
<li><a href="http://meta.stackoverflow.com/questions/2765/how-does-stack-overflow-handle-spam">How does Stack Overflow handle
spam?</a></li>
<li><a href="http://blog.serverfault.com/post/our-storage-decision/">Our Storage
Decision</a></li>
<li><a href="http://meta.stackoverflow.com/questions/4766/how-are-hot-questions-selected">How are “Hot” Questions
Selected?</a> </li>
<li><a href="http://meta.stackoverflow.com/questions/20473/how-are-related-questions-selected">How are “related” questions
selected?</a> -
the title, the question body, and the tags. </li>
<li><a href="http://blog.stackoverflow.com/2010/04/stack-overflow-and-dvcs/">Stack Overflow and
DVCS</a> -
Stack Overflow selects Mercurial for source code control.</li>
<li><a href="http://chat.stackexchange.com/rooms/127/the-comms-room">Server Fault Chat
Room</a> </li>
<li><a href="https://github.com/ServiceStack/ServiceStack.Redis">C# Redis
Client</a></li>
</ul>


					<div class="meta asset-footer">
						<p class="date-publish">
							<span style="margin-left:1.2em;">Published: <span>
							<date class="date-pub" title="2011-03-04" datetime="2011-03-04" pubdate>
							<span class="year">2011-03-04</span>
							</date>
						</p>
						<ul class="list-category list-linear">
							<li class="list-head">category: </li>
							
							


  
     
    	<li style="list-style:none;"><a href="/category.html#企业架构-ref">
    		企业架构 <span>9</span>
    	</a></li>
     
    	<li style="list-style:none;"><a href="/category.html#asp.net-ref">
    		asp.net <span>1</span>
    	</a></li>
    
  


						</ul>
						<ul class="list-tag list-linear">
							<li class="list-head">tags: </li>
							
							


  
     
    	<li><a href="/tags.html#StackOverflow-ref">StackOverflow <span>1</span></a></li>
     
    	<li><a href="/tags.html#架构分析-ref">架构分析 <span>1</span></a></li>
    
  



						</ul>
						<ul class="list-tag list-linear">
							<li class="list-head">版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">Creative Commons BY-NC-ND 3.0</a></li><li class="list-head">原文网址：<a href="http://kb.cnblogs.com/page/92926/" target="_blank">http://kb.cnblogs.com/page/92926/</a></li>

						</ul>
					</div><!-- meta -->
				</div><!-- entry-content -->
				<div class="misc-content">
					<div class="unit-foot">
						<div class="unit-inner unit-foot-inner">
							<nav class="pagination">
								<ul style="text-align:center;padding-top:5px;">
									
									<li class="prev" style="float:left;margin-left:0;"><a class="internal" rel="prev"  href="/archives/2011/02/25/what-really-happens-when-you-navigate-to-a-url.html" title="View 当你输入一个网址的时候，实际会发生什么?">&laquo; 当你输入一个网址的时候，实际会发生什么?</a></li>
									

									
									<li class="next" style="float:right;"><a class="internal" rel="next"  href="/archives/2011/06/11/train-your-temperament.html" title="View 一点一滴培养你的气质">一点一滴培养你的气质 &raquo;</a></li>
									
								</ul>
							</nav>
						</div>
					</div>
					<div class="comment">
					


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'beango'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




					</div>
				</div><!-- misc-content -->
			</div><!-- bd -->

		</div><!-- content -->
	</div><!-- unit-inner -->
</article>

				</div>
			</div><!-- unit-inner -->
		</div><!-- unit-body -->
	</div><!-- body -->
	<footer class="the-footer">
		<div class="unit-foot">
			<div class="unit-inner unit-foot-inner">
				<div class="misc vcard">
					<h4>about</h4>
					<ul>
						<li class="contact"><address><span class="author fn n">Huang Ding</span> - <span class="fn email">yif.com@gmail.com</span></address></li>
						<li class="github"><a href="http://github.com/beango/" rel="me">github.com/beango</a></li>
						<li class="twitter"><a href="http://twitter.com/beango/" rel="me">twitter.com/beango</a></li>
						<li class="rss"><a href="http://feeds.feedburner.com/">Subscribe to RSS Feed</a></li>
					</ul>
				</div><!-- misc -->
				<div class="misc vcard layout-page-footer">
					<h3>分类</h3>
					<ul class="tag_box inline">
					 
					  <li><a href="/category.html#web开发-ref">web开发 （12）</a></li>
					 
					  <li><a href="/category.html#企业架构-ref">企业架构 （9）</a></li>
					 
					  <li><a href="/category.html#asp.net-ref">asp.net （1）</a></li>
					 
					  <li><a href="/category.html#职场-ref">职场 （4）</a></li>
					 
					  <li><a href="/category.html#高性能web-ref">高性能web （13）</a></li>
					 
					  <li><a href="/category.html#javascript-ref">javascript （5）</a></li>
					 
					  <li><a href="/category.html#jekyll-ref">jekyll （2）</a></li>
					 
					  <li><a href="/category.html#NoSql-ref">NoSql （16）</a></li>
					 
					  <li><a href="/category.html#Windows8开发-ref">Windows8开发 （1）</a></li>
					 
					  <li><a href="/category.html#其他-ref">其他 （1）</a></li>
					 
					  <li><a href="/category.html#程序员-ref">程序员 （3）</a></li>
					 
					  <li><a href="/category.html#python-ref">python （1）</a></li>
					
					</ul>
				</div><!-- misc -->
				<div class="misc vcard">
					<h3>近期的日志</h3>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/03/26/javascript-language-features.html" title="">浅谈JavaScript的语言特性</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/03/25/speeding-up-your-python-code.html" title="">加速你的Python代码</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/03/22/scalable-web-architecture-and-distributed-systems.html" title="">可扩展Web架构与分布式系统</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/03/21/what-every-programmer-should-know-about-virtual-memory-part3.html" title="">每个程序员都应该了解的“虚拟内存”知识</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/03/20/what-every-programmer-should-know-about-cpu-cache-part2.html" title="">每个程序员都应该了解的CPU高速缓存</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/03/08/efficient-css.html" title="">翻译-高效的CSS</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/03/01/what-every-programmer-should-know-about-memory-part1.html" title="">每个程序员都应该了解的内存知识</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/02/28/howto-strong-developer.html" title="">如何成为强大的程序员？</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/02/27/state-of-nosql.html" title="">NoSQL的现状</a>
					</li>
					</ul>
					
					<ul class="compact recent">
					<li>
						<a href="/archives/2013/02/21/the-reality-of-developers-life.html" title="">程序猿的真实生活(GIF)</a>
					</li>
					</ul>
					
				</div><!-- misc -->
				<div class="misc vcard layout-page-footer">
					<h3>归档</h3>
					<ul class="tag_box inline">
					  <li><a href="/archive.html#arch-2013-03">2013-03 （7）</a></li><li><a href="/archive.html#arch-2013-02">2013-02 （4）</a></li><li><a href="/archive.html#arch-2013-01">2013-01 （5）</a></li><li><a href="/archive.html#arch-2012-12">2012-12 （3）</a></li><li><a href="/archive.html#arch-2012-11">2012-11 （1）</a></li><li><a href="/archive.html#arch-2012-10">2012-10 （1）</a></li><li><a href="/archive.html#arch-2012-09">2012-09 （1）</a></li><li><a href="/archive.html#arch-2012-08">2012-08 （1）</a></li><li><a href="/archive.html#arch-2012-07">2012-07 （3）</a></li><li><a href="/archive.html#arch-2012-06">2012-06 （4）</a></li><li><a href="/archive.html#arch-2012-05">2012-05 （3）</a></li><li><a href="/archive.html#arch-2012-04">2012-04 （2）</a></li><li><a href="/archive.html#arch-2012-03">2012-03 （4）</a></li><li><a href="/archive.html#arch-2012-02">2012-02 （1）</a></li><li><a href="/archive.html#arch-2011-12">2011-12 （2）</a></li><li><a href="/archive.html#arch-2011-11">2011-11 （1）</a></li><li><a href="/archive.html#arch-2011-10">2011-10 （3）</a></li><li><a href="/archive.html#arch-2011-09">2011-09 （1）</a></li><li><a href="/archive.html#arch-2011-08">2011-08 （1）</a></li><li><a href="/archive.html#arch-2011-06">2011-06 （2）</a></li><li><a href="/archive.html#arch-2011-03">2011-03 （1）</a></li><li><a href="/archive.html#arch-2011-02">2011-02 （1）</a></li>
					</ul>
				</div><!-- misc -->
				<div class="misc vcard layout-page-footer">
					<h3>tags</h3>
					<ul class="tag_box inline">
					    
					  


  
     
    	<li><a href="/tags.html#浏览器-ref">浏览器 <span>2</span></a></li>
     
    	<li><a href="/tags.html#StackOverflow-ref">StackOverflow <span>1</span></a></li>
     
    	<li><a href="/tags.html#架构分析-ref">架构分析 <span>1</span></a></li>
     
    	<li><a href="/tags.html#培养气质-ref">培养气质 <span>1</span></a></li>
     
    	<li><a href="/tags.html#MongoDB-ref">MongoDB <span>3</span></a></li>
     
    	<li><a href="/tags.html#jQuery-ref">jQuery <span>2</span></a></li>
     
    	<li><a href="/tags.html#memcached参数-ref">memcached参数 <span>1</span></a></li>
     
    	<li><a href="/tags.html#Markdown语法说明-ref">Markdown语法说明 <span>1</span></a></li>
     
    	<li><a href="/tags.html#MongoDB构架图-ref">MongoDB构架图 <span>1</span></a></li>
     
    	<li><a href="/tags.html#Redis-ref">Redis <span>4</span></a></li>
     
    	<li><a href="/tags.html#memcached-ref">memcached <span>2</span></a></li>
     
    	<li><a href="/tags.html#Tokyo Tyrant-ref">Tokyo Tyrant <span>2</span></a></li>
     
    	<li><a href="/tags.html#故障转移-ref">故障转移 <span>1</span></a></li>
     
    	<li><a href="/tags.html#高并发-ref">高并发 <span>1</span></a></li>
     
    	<li><a href="/tags.html#key-value持久系统-ref">key-value持久系统 <span>1</span></a></li>
     
    	<li><a href="/tags.html#Memcached-ref">Memcached <span>1</span></a></li>
     
    	<li><a href="/tags.html#tcrmgr-ref">tcrmgr <span>1</span></a></li>
     
    	<li><a href="/tags.html#Windows8-ref">Windows8 <span>1</span></a></li>
     
    	<li><a href="/tags.html#MongoDB最佳实践-ref">MongoDB最佳实践 <span>1</span></a></li>
     
    	<li><a href="/tags.html#缓存-ref">缓存 <span>2</span></a></li>
     
    	<li><a href="/tags.html#集群与缓存-ref">集群与缓存 <span>2</span></a></li>
     
    	<li><a href="/tags.html#.NET-ref">.NET <span>2</span></a></li>
     
    	<li><a href="/tags.html#Performance-ref">Performance <span>2</span></a></li>
     
    	<li><a href="/tags.html#iis请求-ref">iis请求 <span>1</span></a></li>
     
    	<li><a href="/tags.html#asp.net-ref">asp.net <span>1</span></a></li>
     
    	<li><a href="/tags.html#Javascript-ref">Javascript <span>1</span></a></li>
     
    	<li><a href="/tags.html#内存泄露-ref">内存泄露 <span>1</span></a></li>
     
    	<li><a href="/tags.html#MongoDB索引-ref">MongoDB索引 <span>1</span></a></li>
     
    	<li><a href="/tags.html#jQuery选择器-ref">jQuery选择器 <span>1</span></a></li>
     
    	<li><a href="/tags.html#Redis持久化-ref">Redis持久化 <span>1</span></a></li>
     
    	<li><a href="/tags.html#站着编程-ref">站着编程 <span>1</span></a></li>
     
    	<li><a href="/tags.html#nginx-ref">nginx <span>1</span></a></li>
     
    	<li><a href="/tags.html#互联网协议-ref">互联网协议 <span>2</span></a></li>
     
    	<li><a href="/tags.html#Jekyll-ref">Jekyll <span>1</span></a></li>
     
    	<li><a href="/tags.html#rabbitmq集群-ref">rabbitmq集群 <span>1</span></a></li>
     
    	<li><a href="/tags.html#Centos-ref">Centos <span>1</span></a></li>
     
    	<li><a href="/tags.html#PHP-ref">PHP <span>1</span></a></li>
     
    	<li><a href="/tags.html#Nginx-ref">Nginx <span>1</span></a></li>
     
    	<li><a href="/tags.html#Mysql-ref">Mysql <span>1</span></a></li>
     
    	<li><a href="/tags.html#RabbitMQ-ref">RabbitMQ <span>1</span></a></li>
     
    	<li><a href="/tags.html#MongoDB 集群-ref">MongoDB 集群 <span>1</span></a></li>
     
    	<li><a href="/tags.html#缓存、缓存算法和缓存框架简介-ref">缓存、缓存算法和缓存框架简介 <span>1</span></a></li>
     
    	<li><a href="/tags.html#Mongodb安全性初探-ref">Mongodb安全性初探 <span>1</span></a></li>
     
    	<li><a href="/tags.html#HTTP状态码-ref">HTTP状态码 <span>1</span></a></li>
     
    	<li><a href="/tags.html#JavaScript-ref">JavaScript <span>2</span></a></li>
     
    	<li><a href="/tags.html#BSON特性探讨及基于其特性的MongoDB优化-ref">BSON特性探讨及基于其特性的MongoDB优化 <span>1</span></a></li>
     
    	<li><a href="/tags.html#Redis监控-ref">Redis监控 <span>1</span></a></li>
     
    	<li><a href="/tags.html#计算机启动-ref">计算机启动 <span>1</span></a></li>
     
    	<li><a href="/tags.html#程序猿-ref">程序猿 <span>4</span></a></li>
     
    	<li><a href="/tags.html#NoSQL现状-ref">NoSQL现状 <span>1</span></a></li>
     
    	<li><a href="/tags.html#程序员-ref">程序员 <span>1</span></a></li>
     
    	<li><a href="/tags.html#内存知识-ref">内存知识 <span>1</span></a></li>
     
    	<li><a href="/tags.html#css-ref">css <span>1</span></a></li>
     
    	<li><a href="/tags.html#CPU高速缓存-ref">CPU高速缓存 <span>1</span></a></li>
     
    	<li><a href="/tags.html#虚拟内存-ref">虚拟内存 <span>1</span></a></li>
     
    	<li><a href="/tags.html#Web架构-ref">Web架构 <span>1</span></a></li>
     
    	<li><a href="/tags.html#分布式系统-ref">分布式系统 <span>1</span></a></li>
     
    	<li><a href="/tags.html#python-ref">python <span>1</span></a></li>
    
  



					</ul>
				</div><!-- misc -->
				<p class="licence">
					Theme: <a href="http://themes.jekyllbootstrap.com/">the_program</a> based on <a href="http://jekyllbootstrap.com/">Jekyll-bootstrap</a>.<br>
					Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a>.<script src="http://s21.cnzz.com/stat.php?id=4827427&web_id=4827427&show=pic" language="JavaScript"></script>
				</p>
			</div><!-- unit-foot-inner -->
		</div><!-- unit-foot -->
	</footer>
</div><!-- page -->

<script>
/*! A fix for the iOS orientationchange zoom bug.Script by @scottjehl, rebound by @wilto. MIT License.*/
(function(j){var i=j.document;if(!i.querySelectorAll){return}var l=i.querySelectorAll("meta[name=viewport]")[0],a=l&&l.getAttribute("content"),h=a+", maximum-scale=1.0",d=a+", maximum-scale=10.0",g=true,c=j.orientation,k=0;if(!l){return}function f(){l.setAttribute("content",d);g=true}function b(){l.setAttribute("content",h);g=false}function e(m){c=Math.abs(j.orientation);k=Math.abs(m.gamma);if(k>8&&c===0){if(g){b()}}else{if(!g){f()}}}j.addEventListener("orientationchange",f,false);j.addEventListener("deviceorientation",e,false)})(this);
</script>
  
<a class='top-link' id="top-link" style="cursor:pointer;"><img src="/assets/images/back-top.png" width="20" border=0 alt="返回顶部" title="返回顶部"></a>
<a class='btm-link' id="btm-link" style="cursor:pointer;"><img src="/assets/images/back-btm.png" width="20" border=0 alt="跳到底部" title="跳到底部"></a>

<script type="text/javascript" src='/assets/jquery-1.7.1.min.js'></script>
<script type="text/javascript" src="/assets/jquery.scrollTo-1.4.2.js"></script>
<script src='/assets/default.js'></script>
<script type="text/javascript" src="/assets/highlight/google-code-prettify/prettify.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.6/modernizr.min.js"></script>
<script type="text/javascript">
$(function() {
  $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto');
  window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>

